# --------------------------------------------------
# ~/.tmux.conf
# --------------------------------------------------

# logic:
# 1. tmux defaults
# 2. tmux-sensible defaults
# 3. my ~/.tmux.conf overrides

# --------------------------------------------------
# tmux core 
# --------------------------------------------------

# use ctrl-b as prefix (default, predictable everywhere)
set -g prefix C-b

# use vi keys ONLY in copy-mode (does not affect tmux command prompt)
set -g mode-keys vi

# enable OSC 52 clipboard forwarding
set -g set-clipboard on

# enable mouse (selection still requires y/Enter)
set -g mouse on

# --------------------------------------------------
# copy-mode bindings (OSC 52 compatible)
# --------------------------------------------------

# y = copy selection (this is the IMPORTANT one)
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel

# enter = same behavior
bind-key -T copy-mode-vi Enter send-keys -X copy-selection-and-cancel

# mouse release copies selection
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-selection-and-cancel

# --------------------------------------------------
# reload config
# --------------------------------------------------
bind R source-file ~/.tmux.conf \; display-message "tmux.conf reloaded"

# --------------------------------------------------
# tmux plugin manager
# --------------------------------------------------
# install: https://github.com/tmux-plugins/tpm
#
# * Ctrl-b + I: installs new plugins from GitHub or any other git repository
# and refreshes TMUX environment.
# * Ctrl-b + U: updates plugin(s)
# * Ctrl_b + alt + u: remove/uninstall plugins not on the plugin list

# plugin manager
set -g @plugin 'tmux-plugins/tpm'

# list of plugins

# examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

# Sensible default settings for tmux
# (safe defaults, never overrides your settings)
set -g @plugin 'tmux-plugins/tmux-sensible'

# initialize plugin manager 
# note: keep this line at the very bottom of tmux.conf
run '~/.tmux/plugins/tpm/tpm'
